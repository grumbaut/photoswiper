{"version":3,"sources":["util.js","photoswiper.js"],"names":["parseArgs","el","config","args","elements","document","querySelectorAll","NodeList","nodeType","Node","ELEMENT_NODE","setAttribute","newEls","removeAttribute","undefined","Error","isValidPswp","element","Array","from","some","link","length","bemSelectors","block","GALLERY","TITLE","FIGURE","LINK","THUMB","CAPTION","getUrlParam","param","window","location","hash","result","substr","split","map","p","find","Default","onInit","onOpen","photoswipeUI","PhotoSwipeUIDefault","selectors","PSWP","Photoswiper","galleryElement","util","structure","process","emitWarning","onClick","clickHandler","bind","bemRoot","figures","items","fig","parseFigure","forEach","figure","querySelector","addEventListener","enabled","call","index","triggerEl","fromUrl","opts","pswpOptions","showAnimationDuration","pswp","PhotoSwipe","pswpEl","init","isOpen","tabtrap","idleTimer","e","key","ui","setIdle","clearTimeout","setTimeout","options","timeToIdle","listen","current","getCurrentIndex","contains","focus","event","preventDefault","clickTarget","target","srcElement","clickFigure","closest","indexOf","open","thumb","cap","size","getAttribute","item","h","parseInt","w","src","alt","msrc","innerHTML","title","galleryUID","getThumbBoundsFn","pageYScroll","pageYOffset","documentElement","scrollTop","rect","getBoundingClientRect","x","left","y","top","width","pid","gid"],"mappings":"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","file":"photoswiper.map","sourceRoot":"../src","sourcesContent":["export const parseArgs = (el, config) => {\n\tconst args = {};\n\tswitch (typeof el) {\n\tcase 'string':\n\t\t// el was just a selector\n\t\targs.elements = document.querySelectorAll(el);\n\t\tbreak;\n\tcase 'object':\n\t\t// already a NodeList\n\t\tif (el instanceof NodeList) {\n\t\t\targs.elements = el;\n\t\t\t// already an element\n\t\t} else if (el.nodeType === Node.ELEMENT_NODE) {\n\t\t\t// gently coerce into a NodeList\n\t\t\tel.setAttribute('nodeListCoercion');\n\t\t\tconst newEls = document.querySelectorAll('[nodeListCoercion]');\n\t\t\tel.removeAttribute('nodeListCoercion');\n\t\t\targs.elements = newEls;\n\t\t\t// el is probably the config\n\t\t} else if (config === undefined) {\n\t\t\targs.elements = parseArgs(el.el).elements;\n\t\t\targs.config = el;\n\t\t}\n\t\tbreak;\n\tdefault:\n\t\tthrow new Error('Initialize with .init(selector, config)');\n\t}\n\tif (typeof config === 'object' && args.config === undefined) {\n\t\targs.config = config;\n\t}\n\treturn args;\n};\n\n/** a valid PhotoSwipe element contains at least one linked image (a>img) */\nexport const isValidPswp = element => Array.from(element.querySelectorAll('a'))\n\t.some(link => link.querySelectorAll('img').length === 1);\n\nexport const bemSelectors = block => ({\n\tGALLERY: `.${block}`,\n\tTITLE: `.${block}__title`,\n\tFIGURE: `.${block}__figure`,\n\tLINK: `.${block}__link`,\n\tTHUMB: `.${block}__thumbnail`,\n\tCAPTION: `.${block}__caption`,\n});\n\nexport const getUrlParam = (param) => {\n\tif (!window.location.hash) return undefined;\n\tconst result = window.location.hash\n\t\t.substr(1)\n\t\t.split('&')\n\t\t.map(p => p.split('='))\n\t\t.find(p => p[0] === param);\n\treturn (result) ? result[1] : result;\n};\n","/* --------------------------------------------------------------------------\n * Photoswiper\n * by Evan Yamanishi\n * Licensed under GPL-3.0\n * -------------------------------------------------------------------------- */\n\nimport PhotoSwipe from 'photoswipe';\nimport tabtrap from 'tabtrap';\nimport PhotoSwipeUIDefault from 'photoswipe/dist/photoswipe-ui-default';\nimport merge from 'lodash.merge';\nimport * as util from './util';\n\nconst Default = {\n\tonInit: () => {},\n\tonOpen: () => {},\n\tphotoswipeUI: PhotoSwipeUIDefault,\n\tselectors: {\n\t\tPSWP: '.pswp',\n\t\tGALLERY: 'figure',\n\t\tTITLE: 'figcaption',\n\t\tFIGURE: 'figure',\n\t\tLINK: 'a',\n\t\tTHUMB: 'img',\n\t\tCAPTION: 'figcaption',\n\t},\n};\n\n/* CLASS DEFINITION */\nexport default class Photoswiper {\n\tconstructor(galleryElement, config) {\n\t\tthis.galleryElement = galleryElement;\n\t\tif (config.structure && !config.selectors) {\n\t\t\tprocess.emitWarning(\n\t\t\t\t'The \"structure\" option has been renamed \"selectors\".\\n'\n\t\t\t\t+ '\"structure\" will be removed in a future update.',\n\t\t\t\t'DeprecationWarning',\n\t\t\t);\n\t\t\tconfig.selectors = config.structure;\t// eslint-disable-line\n\t\t}\n\t\tthis.config = merge({}, Photoswiper.Default, config);\n\n\t\tif (util.isValidPswp(this.galleryElement)) {\n\t\t\t// bind handlers\n\t\t\tthis.onClick = this.clickHandler.bind(this);\n\n\t\t\t// create the selectors\n\t\t\tconst bemSelectors = (this.config.bemRoot) ? util.bemSelectors(this.config.bemRoot) : {};\n\t\t\tthis.selectors = merge({}, this.config.selectors, bemSelectors);\n\n\t\t\t// collect figures and items\n\t\t\tconst figures = this.galleryElement.querySelectorAll(this.selectors.FIGURE);\n\t\t\tthis.figures = (figures.length) ? figures : [this.galleryElement];\n\t\t\tthis.items = Array.from(this.figures).map(fig => this.parseFigure(fig));\n\n\t\t\t// add listeners to open on click\n\t\t\tthis.figures.forEach((figure) => {\n\t\t\t\tfigure.querySelector(this.selectors.LINK)\n\t\t\t\t\t.addEventListener('click', this.onClick);\n\t\t\t});\n\n\t\t\tthis.enabled = true;\n\n\t\t\tif (typeof this.config.onInit === 'function') {\n\t\t\t\tthis.config.onInit.call(this, this.figures);\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error('Gallery elements must contain a linked image (a[href]>img[src]).\\n', this.galleryElement);\n\t\t}\n\t}\n\n\n\t// getters\n\n\tstatic get Default() {\n\t\treturn Default;\n\t}\n\n\tstatic get pid() {\n\t\tconst pid = util.getUrlParam('pid');\n\t\treturn (pid) ? parseInt(pid, 10) : undefined;\n\t}\n\n\tstatic get gid() {\n\t\tconst gid = util.getUrlParam('gid');\n\t\treturn (gid) ? parseInt(gid, 10) : undefined;\n\t}\n\n\tget pswpEl() {\n\t\treturn document.querySelector(this.selectors.PSWP)\n\t\t\t|| new Error('Make sure to include the .pswp galleryElement on your page');\n\t}\n\n\tget pswpOptions() {\n\t\tconst {\n\t\t\tbemRoot,\n\t\t\tonInit,\n\t\t\tonOpen,\n\t\t\tphotoswipeUI,\n\t\t\tselectors,\n\t\t\tstructure,\n\t\t\t...pswpOptions\n\t\t} = this.config;\n\t\treturn merge({}, pswpOptions, {\n\t\t\tgalleryUID: this.config.galleryUID || this.galleryElement.getAttribute('data-pswp-uid'),\n\t\t\tgetThumbBoundsFn: (index) => {\n\t\t\t\tconst thumb = this.items[index].el.querySelector(this.selectors.THUMB);\n\t\t\t\tconst pageYScroll = window.pageYOffset || document.documentElement.scrollTop;\n\t\t\t\tconst rect = thumb.getBoundingClientRect();\n\n\t\t\t\treturn {\n\t\t\t\t\tx: rect.left,\n\t\t\t\t\ty: rect.top + pageYScroll,\n\t\t\t\t\tw: rect.width,\n\t\t\t\t};\n\t\t\t},\n\t\t});\n\t}\n\n\n\t// public\n\n\tenable() {\n\t\tthis.enabled = true;\n\t}\n\n\tdisable() {\n\t\tthis.enabled = false;\n\t}\n\n\ttoggle() {\n\t\tthis.enabled = !this.enabled;\n\t}\n\n\topen(index, triggerEl, fromUrl = false) {\n\t\tconst opts = { index, ...this.pswpOptions };\n\t\tif (fromUrl) this.opts.showAnimationDuration = 0;\n\n\t\tthis.pswp = new PhotoSwipe(\n\t\t\tthis.pswpEl,\n\t\t\tthis.config.photoswipeUI,\n\t\t\tthis.items,\n\t\t\topts,\n\t\t);\n\n\t\tif (this.enabled) {\n\t\t\tthis.pswp.init();\n\t\t\tthis.isOpen = true;\n\n\t\t\tif (typeof this.config.onOpen === 'function') {\n\t\t\t\tthis.config.onOpen.call(this, this.pswp);\n\t\t\t}\n\n\t\t\t// trap focus in the pswp galleryElement when it's active\n\t\t\tnew tabtrap(this.pswpEl);\t// eslint-disable-line\n\n\t\t\t// manage the idle state on tab press\n\t\t\tlet idleTimer = 0;\n\t\t\tthis.pswpEl.addEventListener('keydown', (e) => {\n\t\t\t\tif (e.key === 'Tab') {\n\t\t\t\t\tthis.pswp.ui.setIdle(false);\n\t\t\t\t\tclearTimeout(idleTimer);\n\n\t\t\t\t\tidleTimer = setTimeout(() => {\n\t\t\t\t\t\tthis.pswp.ui.setIdle(true);\n\t\t\t\t\t}, this.pswp.options.timeToIdle);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// return focus to the correct galleryElement on close\n\t\t\tthis.pswp.listen('close', () => {\n\t\t\t\tconst current = this.pswp.getCurrentIndex();\n\n\t\t\t\tif (this.galleryElement.contains(triggerEl) || !triggerEl) {\n\t\t\t\t\tthis.figures[current].querySelector(this.selectors.LINK).focus();\n\t\t\t\t} else {\n\t\t\t\t\ttriggerEl.focus();\n\t\t\t\t}\n\t\t\t\tthis.isOpen = false;\n\t\t\t});\n\t\t}\n\t\treturn this.pswp;\n\t}\n\n\tinitListeners() {\n\t\tthis.figures.forEach((figure) => {\n\t\t\tfigure.querySelector(this.selectors.LINK)\n\t\t\t\t.addEventListener('click', this.onClick);\n\t\t});\n\t}\n\n\tclickHandler(e = window.event) {\n\t\te.preventDefault();\n\t\tconst clickTarget = e.target || e.srcElement;\n\t\tconst clickFigure = clickTarget.closest(this.selectors.FIGURE)\n\t\t\t|| this.galleryElement;\n\t\tconst index = Array.from(this.figures).indexOf(clickFigure);\n\t\tthis.open(index, clickTarget);\n\t}\n\n\tparseFigure(figure) {\n\t\tconst link = figure.querySelector(this.selectors.LINK);\t\t// required\n\t\tconst thumb = figure.querySelector(this.selectors.THUMB);\t// required\n\t\tconst cap = figure.querySelector(this.selectors.CAPTION);\t// optional\n\n\t\tconst size = link.getAttribute('data-size').split('x');\n\n\t\tconst item = {\n\t\t\tel: figure,\n\t\t\th: parseInt(size[1], 10),\n\t\t\tw: parseInt(size[0], 10),\n\t\t\tsrc: link.getAttribute('href') || link.getAttribute('data-href'),\n\t\t};\n\n\t\tif (thumb) {\n\t\t\titem.alt = thumb.getAttribute('alt');\n\t\t\titem.msrc = thumb.getAttribute('src');\n\t\t}\n\n\t\tif (cap && cap.innerHTML.length > 0) {\n\t\t\titem.title = cap.innerHTML;\n\t\t}\n\t\treturn item;\n\t}\n}\n"]}